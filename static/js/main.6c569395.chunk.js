(this["webpackJsonptransit-frequency-map"]=this["webpackJsonptransit-frequency-map"]||[]).push([[0],{147:function(e,t,a){e.exports=a(236)},152:function(e,t,a){},154:function(e,t,a){},173:function(e,t,a){},226:function(e,t,a){},236:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(4),r=a.n(i),c=(a(152),a(142)),o=a(32),u=a(49),l=a.n(u),p=a(74),m=a(65),h=a(117),y=a(66),d=a(144),f=a(145),b=a(241),g=a(56),v=a(246),E=a(248),k=a(247),q=(a(154),a(155),a(239));function w(e){return s.a.createElement("div",{className:"Map"},s.a.createElement(v.a,{style:{flex:"1 1 auto"},zoom:12,center:e.position},s.a.createElement(E.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.geoJson?s.a.createElement(k.a,{className:"GeoJSON",data:e.geoJson}):void 0),e.loading?s.a.createElement("div",{className:"LoadingSpinner"},s.a.createElement(q.a,{size:"large"})):void 0)}a(173);var S=a(242),C=a(240),O=a(243),j=a(244),I=a(245),T=S.a.Option;function x(e){return s.a.createElement("div",{className:"Controls"},s.a.createElement(C.a,null,s.a.createElement(S.a,{className:"CitySelect",showSearch:!0,value:e.selectedCity,disabled:e.disabled,onChange:function(t){return e.setCity(t)}},Object.keys(e.cities).map((function(t){return s.a.createElement(T,{value:t,key:t},e.cities[t].name)}))),s.a.createElement(S.a,{className:"FrequencySelect",value:e.selectedFrequency,disabled:e.disabled,onChange:function(t){return e.setFrequency(t)}},e.frequencies.map((function(e){return s.a.createElement(T,{value:e,key:e},"Every ",e," minutes")}))),s.a.createElement(O.a.Group,{onChange:function(t){return e.setTime(t.target.value)},value:e.selectedTime,disabled:e.disabled},Object.keys(e.times).map((function(t){return s.a.createElement(O.a.Button,{key:t,value:t},e.times[t])}))),s.a.createElement(j.a,{title:"About"},s.a.createElement(g.a,{shape:"circle",icon:s.a.createElement(I.a,null),onClick:function(){return e.showInfo()}}))))}var F=a(94),J=(a(226),[10,15,20]),M={allday:"7 AM to 10 PM",night:"10 PM to 12AM"},P=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={city:"sydney",time:"allday",frequency:15,loading:!0,geoJson:void 0,introPopupVisible:!localStorage.getItem("autoHideIntro")},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setDisplay(this.props.match.params.city||"sydney",this.props.match.params.time||"allday",parseInt(this.props.match.params.frequency)||15)}},{key:"componentWillUnmount",value:function(){this.shouldCancel=!0}},{key:"componentDidUpdate",value:function(e){this.props.match.params.city&&this.props.match.params.city!==e.match.params.city&&this.props.match.params.city!==this.state.city&&this.setCity(this.props.match.params.city),this.props.match.params.time&&this.props.match.params.time!==e.match.params.time&&this.props.match.params.time!==this.state.time&&this.setTime(this.props.match.params.time),this.props.match.params.frequency&&this.props.match.params.frequency!==e.match.params.frequency&&this.props.match.params.frequency!==this.state.frequency&&this.setFrequency(parseInt(this.props.match.params.frequency))}},{key:"setDisplay",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(Object(p.a)({},this.state,{city:t,time:a,frequency:n,loading:!0,geoJson:void 0})),e.next=3,this.props.cityService.getCityData(t,a,n);case 3:if(s=e.sent,!this.shouldCancel){e.next=6;break}return e.abrupt("return");case 6:this.setState(Object(p.a)({},this.state,{loading:!1,geoJson:s})),this.props.history.push("/".concat(t,"/").concat(a,"/").concat(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"setCity",value:function(e){this.state.city!==e&&this.setDisplay(e,this.state.time,this.state.frequency)}},{key:"setFrequency",value:function(e){this.state.frequency!==e&&this.setDisplay(this.state.city,this.state.time,e)}},{key:"setTime",value:function(e){this.state.time!==e&&this.setDisplay(this.state.city,e,this.state.frequency)}},{key:"setIntroPopupVisible",value:function(e){this.state.introPopupVisible!==e&&(this.props.localStorage.setItem("autoHideIntro",!0),this.setState(Object(p.a)({},this.state,{introPopupVisible:e})))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(x,{cities:F,selectedCity:this.state.city,setCity:function(t){return e.setCity(t)},frequencies:J,selectedFrequency:this.state.frequency,setFrequency:function(t){return e.setFrequency(t)},times:M,selectedTime:this.state.time,setTime:function(t){return e.setTime(t)},disabled:this.state.loading,showInfo:function(){return e.setIntroPopupVisible(!0)}}),s.a.createElement(w,{position:F[this.state.city].position,geoJson:this.state.geoJson,loading:this.state.loading}),s.a.createElement(b.a,{title:"Transit Frequency Map",visible:this.state.introPopupVisible,onCancel:function(){return e.setIntroPopupVisible(!1)},footer:[s.a.createElement(g.a,{key:"submit",type:"primary",onClick:function(){return e.setIntroPopupVisible(!1)}},"Ok")]},s.a.createElement("p",null,"This site maps access to frequent public transport across Australian cities. Shaded areas represent places within an 800m radius of a transit stop with frequent service all throughout the selected time period."),s.a.createElement("p",null,"Built by"," ",s.a.createElement("a",{href:"https://www.rorydungan.com/",target:"_blank"},"Rory Dungan"),", using"," ",s.a.createElement("a",{href:"https://www.openstreetmap.org/",target:"_blank"},"OpenStreetMap")," ","with GTFS data from"," ",s.a.createElement("a",{href:"https://transitfeeds.com/"},"TransitFeeds")," and individual transit agencies.")))}}]),a}(n.Component);function D(e){return s.a.createElement(c.a,null,s.a.createElement(o.a,{path:"/:city?/:time?/:frequency?",render:function(t){return s.a.createElement(P,Object.assign({cityService:e.cityService,localStorage:e.localStorage},t))}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(139);r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,{cityService:function(e){return{getCityData:function(){var t=Object(m.a)(l.a.mark((function t(a,n,s){var i,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="cities/".concat(a,"-").concat(n,"-").concat(s,"mins.msg"),t.next=3,e(i);case 3:if((r=t.sent).ok){t.next=6;break}throw new Error("Tried to GET ".concat(i,", returned status ").concat(r.status));case 6:return t.next=8,Object(N.decodeAsync)(r.body);case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}}(fetch),localStorage:window.localStorage})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e){e.exports=JSON.parse('{"adelaide":{"name":"Adelaide","position":[-34.9285,138.6007]},"brisbane":{"name":"Brisbane","position":[-27.4698,153.0251]},"canberra":{"name":"Canberra","position":[-35.2809,149.13]},"melbourne":{"name":"Melbourne","position":[-37.8136,144.9631]},"perth":{"name":"Perth","position":[-31.9505,115.8605]},"sydney":{"name":"Sydney","position":[-33.8688,151.2093]}}')}},[[147,1,2]]]);
//# sourceMappingURL=main.6c569395.chunk.js.map